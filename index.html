<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VC Suitcase Jump Game</title>
  <style>
    body { margin:0; padding:0; background:#0d0d0d; overflow:hidden; font-family:monospace; }
    canvas { display:block; background:#222; image-rendering:pixelated; }
    #score { position:absolute; top:10px; left:10px; color:#0f0; font-size:20px; }
    #message { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#f00; font-size:24px; white-space:pre; text-align:center; }
    #quotePopup { position:absolute; top:60%; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.8); color:#0ff; font-size:18px; padding:8px 16px; border:2px solid #0f0; display:none; }
  </style>
</head>
<body>
  <div id="score">Score: 0</div>
  <div id="message">Press Space to Start</div>
  <div id="quotePopup"></div>
  <canvas id="game"></canvas>
  <script>
    // ---- Setup ----
    const canvas = document.getElementById('game');
    const ctx    = canvas.getContext('2d');
    ctx.imageSmoothingEnabled = false;
    const scoreDiv   = document.getElementById('score');
    const messageDiv = document.getElementById('message');
    const quotePopup = document.getElementById('quotePopup');

    let W, H, groundY;
    function resize() {
      W = canvas.width  = window.innerWidth;
      H = canvas.height = window.innerHeight;
      groundY = H / 2;
      initClouds();
    }
    window.addEventListener('resize', resize);
    resize();

    // ---- Assets ----
    const sprite      = new Image(); sprite.src      = 'vc-run.png';    // player sprite
    const obstacleImg = new Image(); obstacleImg.src = 'believe.png';  // obstacle
    const cloudImg    = new Image(); cloudImg.src    = 'cloud1.png';   // single cloud image

    // ---- Cloud Layer ----
    const clouds = [];
    function initClouds() {
      clouds.length = 0;
      // create 5 clouds with random positions and speeds
      for (let i = 0; i < 5; i++) {
        clouds.push({
          x: Math.random() * W,
          y: Math.random() * (groundY / 2),
          speed: 0.5 + Math.random() * 0.5
        });
      }
    }

    // ---- Game State ----
    const player = { x:50, y:groundY-150, w:100, h:150, vy:0, gravity:0.6, jumpForce:-15, frame:0, frameTimer:0, frameCount:3 };
    let obstacles   = [], spawnTimer=0;
    const obstacleSpeed = 6;
    const vcQuotes = [
      'Raise fast, fail faster.', 'Your burn rate is my vibe rate.',
      'Pivot or perish.', 'Terms: 0% equity, 200% ghosting.',
      'Disrupt the disruptors.', 'Build in stealth mode.',
      'Scale or sail away.', 'Remember: traction > strategy.'
    ];
    let quotes = [], quoteTimer=0;
    let score=0, gameStarted=false, gameOver=false;
    const footOffset = 6;

    // ---- Main Loop ----
    function update() {
      if (!gameStarted || gameOver) return;

      // move clouds
      clouds.forEach(c => {
        c.x -= c.speed;
        if (c.x < -100) c.x = W;  // wrap when fully offscreen (cloud width now 100)
      });

      // spawn obstacles
      spawnTimer++;
      if (spawnTimer > 90) {
        spawnTimer=0;
        obstacles.push({ x:W, y:groundY-60, size:60, passed:false });
      }

      // spawn quotes
      quoteTimer++;
      if (quoteTimer > 300) {
        quoteTimer=0;
        const txt = vcQuotes[Math.floor(Math.random()*vcQuotes.length)];
        quotes.push({ x:W, y:groundY-player.h-80, text:txt, size:18, collected:false });
      }

      // physics
      player.vy += player.gravity;
      player.y += player.vy;
      if (player.y + player.h > groundY) {
        player.y = groundY - player.h;
        player.vy = 0;
      }

      // animate sprite
      if (sprite.complete) {
        player.frameTimer++;
        if (player.frameTimer > 6) {
          player.frameTimer=0;
          player.frame=(player.frame+1)%player.frameCount;
        }
      }

      // move obstacles & collision
      obstacles.forEach((o,i) => {
        o.x -= obstacleSpeed;
        if (!o.passed && o.x+o.size < player.x) {
          o.passed=true;
          scoreDiv.textContent='Score: '+(++score);
        }
        if (
          player.x < o.x+o.size &&
          player.x+player.w>o.x &&
          player.y<o.y+o.size &&
          player.y+player.h>o.y
        ) {
          gameOver=true;
          messageDiv.textContent=`RIP VC\nFinal Score: ${score}\nPress Space to Restart`;
        }
        if (o.x+o.size < 0) obstacles.splice(i,1);
      });

      // move quotes
      quotes.forEach((q,i) => {
        q.x -= obstacleSpeed*0.8;
        if (!q.collected && q.x + ctx.measureText(q.text).width < player.x) {
          q.collected=true;
          quotePopup.textContent=q.text;
          quotePopup.style.display='block';
          setTimeout(()=>quotePopup.style.display='none',2000);
        }
        if (q.x + ctx.measureText(q.text).width < 0) quotes.splice(i,1);
      });
    }

    function draw() {
      ctx.clearRect(0,0,W,H);

      // draw clouds
      clouds.forEach(c => ctx.drawImage(cloudImg, c.x, c.y, 100, 50));

      // ground line
      ctx.fillStyle='#555';
      ctx.fillRect(0,groundY,W,5);

      // player
      if (sprite.complete) {
        const sw=sprite.naturalWidth/player.frameCount;
        const sh=sprite.naturalHeight;
        ctx.drawImage(
          sprite,
          player.frame*sw,0,sw,sh,
          player.x, player.y+footOffset, player.w, player.h
        );
      } else {
        ctx.fillStyle='#0f0';
        ctx.fillRect(player.x, player.y+footOffset, player.w, player.h);
      }

      // obstacles
      obstacles.forEach(o => ctx.drawImage(obstacleImg, o.x, o.y, o.size, o.size));

      // quotes
      ctx.fillStyle='#0ff';
      quotes.forEach(q => {
        ctx.font=`${q.size}px monospace`;
        ctx.fillText(q.text, q.x, q.y);
      });
    }

    function loop() { update(); draw(); requestAnimationFrame(loop); }
    loop();

    // ---- Input ----
    window.addEventListener('keydown', e => {
      if (e.code==='Space') {
        if (!gameStarted) {
          gameStarted=true;
          messageDiv.style.display='none';
        } else if (gameOver) {
          obstacles.length=quotes.length=0;
          score=0; spawnTimer=quoteTimer=0;
          gameOver=false;
          player.y=groundY-player.h;
          player.vy=0;
          scoreDiv.textContent='Score: 0';
          messageDiv.textContent='Press Space to Start';
          messageDiv.style.display='block';
        } else if (player.vy===0) {
          player.vy=player.jumpForce;
        }
      }
    });
  </script>
</body>
</html>
